FROM nvcr.io/nvidia/tritonserver:22.12-py3

RUN pip install --no-cache-dir \
        torch==2.2.2+cu118 \
        transformers==4.33.3 \
        sentence-transformers==2.4.1 \
        flagembedding==1.2.3 \
        peft==0.9.0 \
        accelerate==0.28.0 \
        --extra-index-url https://download.pytorch.org/whl/cu118

# отключаем «похождения» в HF‑hub
ENV HF_HUB_DISABLE_TELEMETRY=1 \
    HF_HUB_ENABLE_HF_TRANSFER=0
